<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="responsive.css">
    <title>TruthLens Pro - AI-Powered Truth Detection</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #06b6d4;
            --accent: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1f2937;
            --light: #f9fafb;
            --glass: rgba(255, 255, 255, 0.1);
            --shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --gradient-4: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .bg-animation::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(255, 255, 255, 0.06) 0%, transparent 50%);
            animation: float 20s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateX(-50px) translateY(-50px) rotate(0deg); }
            50% { transform: translateX(50px) translateY(50px) rotate(180deg); }
        }
        
        /* Header Section */
        .header {
            text-align: center;
            padding: 60px 20px 20px 20px;
            position: relative;
            margin-top: 100px; /* Space for fixed navbar */
        }
        
        
      
        @keyframes pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.8; }
        }
        
        .tagline {
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 300;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            text-align: center;
            color: white;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            display: block;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
            font-weight: 300;
        }
        
        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 1;
        }
        
        /* Glass Card Design */
        .main-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 24px;
            padding: 50px;
            box-shadow: var(--shadow);
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }
        
        .main-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .main-card:hover::before {
            left: 100%;
        }
        
        /* Input Section Enhanced */
        .input-section {
            position: relative;
            z-index: 2;
        }
        
        .input-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 8px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }
        
        .tab-btn {
            flex: 1;
            padding: 15px 20px;
            background: transparent;
            border: none;
            border-radius: 12px;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .tab-btn.active {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            transform: translateY(-2px);
        }
        
        .input-group {
            position: relative;
            margin-bottom: 25px;
        }
        
        .input-label {
            display: block;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }
        
        .input-wrapper {
            position: relative;
            overflow: hidden;
            border-radius: 16px;
        }
        
        .input-field {
            width: 100%;
            padding: 20px 60px 20px 20px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            color: white;
            transition: all 0.3s ease;
            resize: none;
        }
        
        .input-field::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
            transform: translateY(-2px);
        }
        
        .input-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.6);
            font-size: 1.2rem;
        }
        
        /* Enhanced Analyze Button */
        .analyze-btn {
            background: var(--gradient-1);
            border: none;
            padding: 20px 50px;
            border-radius: 16px;
            color: white;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            display: block;
            margin: 30px auto;
            min-width: 280px;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
        }
        
        .analyze-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .analyze-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(99, 102, 241, 0.4);
        }
        
        .analyze-btn:hover::before {
            left: 100%;
        }
        
        .analyze-btn:active {
            transform: translateY(-1px);
        }
        
        .analyze-btn.loading {
            pointer-events: none;
            opacity: 0.8;
        }
        
        /* Advanced Loading Animation */
        .loading-section {
            display: none;
            text-align: center;
            padding: 40px;
            color: white;
        }
        
        .loading-spinner {
            width: 80px;
            height: 80px;
            margin: 0 auto 25px;
            position: relative;
        }
        
        .loading-spinner::before,
        .loading-spinner::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            animation: pulse-ring 2s ease-in-out infinite;
        }
        
        .loading-spinner::before {
            width: 100%;
            height: 100%;
            border: 3px solid rgba(255, 255, 255, 0.3);
            animation-delay: -1s;
        }
        
        .loading-spinner::after {
            width: 80%;
            height: 80%;
            top: 10%;
            left: 10%;
            border: 3px solid rgba(99, 102, 241, 0.8);
        }
        
        @keyframes pulse-ring {
            0% { transform: scale(0.8); opacity: 1; }
            100% { transform: scale(1.2); opacity: 0; }
        }
        
        .loading-text {
            font-size: 1.2rem;
            font-weight: 500;
            margin-bottom: 10px;
        }
        
        .loading-steps {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        /* Results Section Enhanced */
        .results-section {
            display: none;
            animation: slideInUp 0.8s ease-out;
        }
        
        @keyframes slideInUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .results-header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }
        
        .results-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 10px;
        }
        
        .results-subtitle {
            font-size: 1.1rem;
            opacity: 0.8;
        }
        
        /* Credibility Score Enhanced */
        .credibility-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .credibility-main {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .credibility-info {
            color: white;
        }
        
        .credibility-info h3 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .credibility-info p {
            opacity: 0.8;
            font-size: 1rem;
        }
        
        .score-display {
            position: relative;
            width: 120px;
            height: 120px;
        }
        
        .score-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 2rem;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .score-circle::before {
            content: '';
            position: absolute;
            inset: 3px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.2);
            z-index: 0;
        }
        
        .score-text {
            position: relative;
            z-index: 1;
        }
        
        .score-high { 
            background: var(--gradient-4);
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.5);
        }
        
        .score-medium { 
            background: var(--gradient-2);
            box-shadow: 0 0 30px rgba(245, 158, 11, 0.5);
        }
        
        .score-low { 
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.5);
        }
        
        /* Analysis Grid Enhanced */
        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .analysis-item {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 16px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .analysis-item:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .analysis-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-1);
        }
        
        .analysis-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            display: block;
        }
        
        .analysis-item h4 {
            color: white;
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }
        
        .analysis-value {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--secondary);
        }
        
       
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .header { padding: 40px 20px 20px 20px; margin-top: 80px; }
            .header { margin-top: 70px; padding-top: 32px; }
            nav { padding: 10px 0; }
            .nav-left { font-size: 1.5rem; margin-left: 12px; }
            .nav-right { margin-right: 12px; }
            .nav-right a { font-size: 0.95rem; padding: 6px 10px; }
            .logo { font-size: 2.5rem; }
            .tagline { font-size: 1.2rem; }
            .main-card { padding: 30px 25px; }
            .stats-bar { gap: 20px; }
            .stat-number { font-size: 2rem; }
            .credibility-main { flex-direction: column; text-align: center; }
            .features-grid { grid-template-columns: 1fr; }
            .analysis-grid { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
        }
        
        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after { animation-duration: 0.01ms !important; }
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.1); }
        ::-webkit-scrollbar-thumb { 
            background: rgba(99, 102, 241, 0.6); 
            border-radius: 4px; 
        }
        ::-webkit-scrollbar-thumb:hover { 
            background: rgba(99, 102, 241, 0.8); 
        }
        nav {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(8px);
            padding: 18px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 0 0 18px 18px;
            box-shadow: 0 4px 24px #764ba220;
            /* Fixed navbar styles */
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            width: 100%;
            box-sizing: border-box;
        }
        .nav-left {
            display: flex;
            align-items: center;
            font-size: 2.6rem;
            font-weight: 900;
            color: #fff;
            margin-left: 32px;
            text-shadow: 0 2px 12px #4facfe99, 0 1px 0 #333;
            letter-spacing: 2px;
            user-select: none;
        }
        .nav-right {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-right: 32px;
        }
        .nav-right a {
            color: #fff;
            text-shadow: 0 2px 8px #4facfe55, 0 1px 0 #333;
            text-decoration: none;
            font-weight: 700;
            margin: 0 8px;
            font-size: 1.1rem;
            padding: 8px 18px;
            border-radius: 8px;
            transition: background 0.2s, color 0.2s, text-shadow 0.2s;
        }
        .nav-right a:hover, .nav-right a.active {
            background: linear-gradient(90deg, #00f2fe 0%, #4facfe 100%);
            color: #fff;
            text-shadow: 0 4px 16px #00f2fe99, 0 1px 0 #333;
        }
    </style>
    
</head>
<body>
    <div class="bg-animation"></div>

    <nav>
        <div class="nav-left">🔍TruthLens</div>
        <div class="nav-right">
            <a href="index.html">Home</a>
            <a href="about.html">About</a>
            <a href="features.html">Features</a>
            <a href="contact.html">Contact</a>
            <a href="user_dashboard.html">Dashboard</a>
            <a href="login.html" class="login-nav-btn" style="margin-left: 12px; border: 1.5px solid #4facfe; background: #fff; color: #4facfe; font-weight: 700; border-radius: 8px; padding: 8px 22px; box-shadow: 0 2px 8px #4facfe22; display: flex; align-items: center; gap: 8px;"><i class="fas fa-sign-in-alt"></i> Login</a>
        </div>
    </nav>

    <div class="header">
       
        <select id="langSwitcher" style="margin-top:20px; padding:6px 12px; border-radius:8px; font-size:1rem;">
            <option value="en">English</option>
            <option value="hi">हिन्दी</option>
            <option value="ur">اردو</option>
            <option value="bn">বাংলা</option>
            <option value="gu">ગુજરાતી</option>
        </select>
        <button id="themeToggle" title="Toggle dark/light mode" style="margin-left:16px; padding:6px 12px; border-radius:8px; font-size:1rem; border:none; background:#eee; cursor:pointer;">🌙</button>
    </div>
    
    <div class="container">
        <div class="main-card">
            <div class="input-section">
                <div class="input-tabs">
                    <button class="tab-btn active" onclick="switchTab('text')">
                        <i class="fas fa-edit"></i> Text Analysis
                    </button>
                    <button class="tab-btn" onclick="switchTab('url')">
                        <i class="fas fa-link"></i> URL Verification
                    </button>
                    <button class="tab-btn" onclick="switchTab('image')">
                        <i class="fas fa-image"></i> Image Check
                    </button>
                </div>
                
                <div id="text-tab" class="tab-content">
                    <div class="input-group">
                        <label for="newsText" data-key="textLabel">📝 News Content</label>
                        <div class="input-wrapper">
                            <textarea id="newsText" class="input-field text-input" rows="6" data-key-placeholder="textPlaceholder" placeholder="Paste the news article text here..."></textarea>
                            <i class="fas fa-align-left input-icon"></i>
                            <button id="voiceBtn" type="button" style="margin-top:10px; background:#06b6d4; color:white; border:none; border-radius:8px; padding:8px 16px; cursor:pointer;">🎤 Speak News</button>
                        </div>
                    </div>
                </div>
                
                <div id="url-tab" class="tab-content" style="display: none;">
                    <div class="input-group">
                        <label for="newsUrl" data-key="urlLabel">📰 News Article URL (Optional)</label>
                        <div class="input-wrapper">
                            <input type="url" id="newsUrl" class="input-field" data-key-placeholder="urlPlaceholder" placeholder="Paste news article URL (optional)">
                            <i class="fas fa-link input-icon"></i>
                        </div>
                    </div>
                </div>
                
                <div id="image-tab" class="tab-content" style="display: none;">
                    <div class="input-group">
                        <label class="input-label">🖼️ Upload Image for Verification</label>
                        <div class="input-wrapper">
                            <input type="file" id="newsImage" class="input-field" accept="image/*">
                            <i class="fas fa-image input-icon"></i>
                        </div>
                    </div>
                </div>
                
                <button class="analyze-btn" onclick="analyzeContent()" data-key="analyzeBtn">
                    <i class="fas fa-search"></i> Analyze for Truth
                </button>
            </div>
            
            <div class="loading-section" id="loading">
                <div class="loading-spinner"></div>
                <div class="loading-text">AI Analysis in Progress...</div>
                <div class="loading-steps" id="loadingSteps">Initializing neural networks...</div>
            </div>
            
            <div class="results-section" id="results" style="display:none;">
                <div class="results-header">
                    <div class="results-title">Analysis Complete</div>
                    <div class="results-subtitle">Comprehensive truth verification report</div>
                </div>
                
                <div class="credibility-card">
                    <div class="credibility-main">
                        <div class="credibility-info">
                            <h3>Truth Credibility Score</h3>
                            <p>Based on 12 advanced AI parameters</p>
                        </div>
                        <div class="score-display">
                            <div class="score-circle score-high" id="scoreCircle">
                                <span class="score-text" id="scoreText">87%</span>
                            </div>
                        </div>
                    </div>
                    <div id="resultExplanation" style="margin-top:10px; font-size:1rem; color:#333;"></div>
                    <div id="highlightedText" style="margin-top:10px; font-size:0.95rem; color:#d97706;"></div>
                    <div id="shareCopyBtns" style="margin-top:10px; display:flex; gap:10px;">
                        <button id="copyResultBtn" style="padding:6px 12px; border-radius:6px; border:none; background:#6366f1; color:white; cursor:pointer;">Copy Result</button>
                        <button id="shareResultBtn" style="padding:6px 12px; border-radius:6px; border:none; background:#10b981; color:white; cursor:pointer;">Share Result</button>
                    </div>
                    <div id="feedbackBtns" style="margin-top:10px;">
                        <span>Was this prediction helpful?</span>
                        <button id="feedbackYes" style="margin-left:8px; background:#10b981; color:white; border:none; border-radius:6px; padding:4px 10px;">Yes</button>
                        <button id="feedbackNo" style="margin-left:4px; background:#ef4444; color:white; border:none; border-radius:6px; padding:4px 10px;">No</button>
                        <span id="feedbackMsg" style="margin-left:10px; color:#6366f1;"></span>
                    </div>
                    <div id="historySection" style="margin-top:18px;">
                        <strong>History:</strong>
                        <ul id="historyList" style="font-size:0.95rem; color:#374151; margin:0; padding-left:18px;"></ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="analysis-grid" id="analysisGrid" style="display:none;">
                        <div class="analysis-item">
                            <span class="analysis-icon">🌐</span>
                            <h4>Language Detected</h4>
                            <div class="analysis-value" id="language">English</div>
                        </div>
                        <div class="analysis-item">
                            <span class="analysis-icon">😊</span>
                            <h4>Sentiment Analysis</h4>
                            <div class="analysis-value" id="sentiment">Neutral</div>
                        </div>
                        <div class="analysis-item">
                            <span class="analysis-icon">🏢</span>
                            <h4>Source Authority</h4>
                            <div class="analysis-value" id="authority">High</div>
                        </div>
                        <div class="analysis-item">
                            <span class="analysis-icon">⏰</span>
                            <h4>Content Freshness</h4>
                            <div class="analysis-value" id="recency">Recent</div>
                        </div>
                        <div class="analysis-item">
                            <span class="analysis-icon">🔗</span>
                            <h4>Reference Links</h4>
                            <div class="analysis-value" id="links">7 Valid</div>
                        </div>
                        <div class="analysis-item">
                            <span class="analysis-icon">🎯</span>
                            <h4>Bias Detection</h4>
                            <div class="analysis-value" id="bias">Low</div>
                        </div>
                        <div class="analysis-item">
                            <span class="analysis-icon">📱</span>
                            <h4>Social Signals</h4>
                            <div class="analysis-value" id="social">Positive</div>
                        </div>
                        <div class="analysis-item">
                            <span class="analysis-icon">🤖</span>
                            <h4>Bot Activity</h4>
                            <div class="analysis-value" id="bot">None</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
       

    <script>
        // --- Dark/Light Mode ---
        const themeToggle = document.getElementById('themeToggle');
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            themeToggle.textContent = document.body.classList.contains('dark-mode') ? '☀️' : '🌙';
        });
        // Add dark-mode CSS
        const darkStyle = document.createElement('style');
        darkStyle.innerHTML = `
            body.dark-mode { background: #18181b !important; color: #f3f4f6 !important; }
            body.dark-mode .main-card, body.dark-mode .input-field { background: #23232a !important; color: #f3f4f6 !important; }
            body.dark-mode .input-field::placeholder { color: #a1a1aa !important; }
            body.dark-mode .analyze-btn, body.dark-mode #voiceBtn { background: #6366f1 !important; color: #fff !important; }
            body.dark-mode .score-circle { background: #23232a !important; color: #fff !important; }
        `;
        document.head.appendChild(darkStyle);

        // --- Voice Input ---
        const voiceBtn = document.getElementById('voiceBtn');
        if (window.SpeechRecognition || window.webkitSpeechRecognition) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            const recognition = new SpeechRecognition();
            recognition.lang = 'en-IN';
            voiceBtn.onclick = function() {
                recognition.start();
                voiceBtn.textContent = '🎤 Listening...';
            };
            recognition.onresult = function(event) {
                document.getElementById('newsText').value = event.results[0][0].transcript;
                voiceBtn.textContent = '🎤 Speak News';
            };
            recognition.onend = function() {
                voiceBtn.textContent = '🎤 Speak News';
            };
        } else {
            voiceBtn.style.display = 'none';
        }

        // --- History ---
        function saveToHistory(news, result) {
            let history = JSON.parse(localStorage.getItem('newsHistory') || '[]');
            history.unshift({ news, result, time: new Date().toLocaleString() });
            if (history.length > 10) history = history.slice(0, 10);
            localStorage.setItem('newsHistory', JSON.stringify(history));
            renderHistory();
        }
        function renderHistory() {
            let history = JSON.parse(localStorage.getItem('newsHistory') || '[]');
            const list = document.getElementById('historyList');
            list.innerHTML = '';
            history.forEach(item => {
                const li = document.createElement('li');
                li.textContent = `${item.news.substring(0, 40)}... [${item.result}] (${item.time})`;
                list.appendChild(li);
            });
        }
        renderHistory();

        // --- Share/Copy Result ---
        document.getElementById('copyResultBtn').onclick = function() {
            const text = document.getElementById('resultExplanation').textContent;
            navigator.clipboard.writeText(text);
            this.textContent = 'Copied!';
            setTimeout(() => { this.textContent = 'Copy Result'; }, 1200);
        };
        document.getElementById('shareResultBtn').onclick = function() {
            const text = document.getElementById('resultExplanation').textContent;
            if (navigator.share) {
                navigator.share({ text });
            } else {
                alert('Share not supported on this browser.');
            }
        };

        // --- Feedback ---
        document.getElementById('feedbackYes').onclick = function() {
            document.getElementById('feedbackMsg').textContent = 'Thank you for your feedback!';
        };
        document.getElementById('feedbackNo').onclick = function() {
            document.getElementById('feedbackMsg').textContent = 'We appreciate your input!';
        };

        // --- Result Explanation & Highlights ---
        function explainResult(news, result) {
            let explanation = '';
            let suspicious = [];
            if (result.score < 50) {
                explanation = 'This news appears suspicious due to emotional or exaggerated language.';
                suspicious = news.match(/(shocking|breaking|unbelievable|fake|scam|urgent|exclusive|viral|amazing|terrible|disaster|crisis)/gi) || [];
            } else if (result.score < 75) {
                explanation = 'This news has some questionable elements. Please verify from trusted sources.';
                suspicious = news.match(/(claim|alleged|reportedly|sources say|unconfirmed|rumor)/gi) || [];
            } else {
                explanation = 'This news appears credible based on the analysis.';
            }
            document.getElementById('resultExplanation').textContent = explanation;
            // Highlight suspicious words
            let highlighted = news;
            suspicious.forEach(word => {
                highlighted = highlighted.replace(new RegExp(word, 'gi'), '<mark style="background:#fde68a; color:#b91c1c;">'+word+'</mark>');
            });
            document.getElementById('highlightedText').innerHTML = suspicious.length ? 'Suspicious: ' + highlighted : '';
        }

        // --- Hook into your existing result display logic ---
        const origDisplayEnhancedResults = window.displayEnhancedResults || function(){};
        window.displayEnhancedResults = function(results) {
            origDisplayEnhancedResults(results);
            const news = document.getElementById('newsText').value;
            explainResult(news, results);
            saveToHistory(news, results.score + '%');
        };
        let currentTab = 'text';
        
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + '-tab').style.display = 'block';
            
            // Add active class to clicked button
            event.target.classList.add('active');
            
            currentTab = tabName;
        }
        
        function analyzeContent() {
            let content = '';
            if (currentTab === 'text') {
                content = document.getElementById('newsText').value;
            } else if (currentTab === 'url') {
                content = document.getElementById('newsUrl').value;
            } else if (currentTab === 'image') {
                const file = document.getElementById('newsImage').files[0];
                if (file) content = file.name;
            }
            // Hide results and analysis grid before analysis
            document.getElementById('results').style.display = 'none';
            document.getElementById('analysisGrid').style.display = 'none';
            
            if (!content.trim()) {
                alert('Please enter content to analyze!');
                return;
            }
            
            // Show loading with enhanced animation
            showLoading();
            
            // Hide results
            document.getElementById('results').style.display = 'none';
            
            // Simulate advanced AI analysis
            simulateAdvancedAnalysis(content);
        }
        
        function showLoading() {
            document.getElementById('loading').style.display = 'block';
            
            const steps = [
                'Initializing neural networks...',
                'Processing multi-language content...',
                'Analyzing source credibility...',
                'Cross-referencing fact databases...',
                'Detecting social sentiment patterns...',
                'Scanning for bot activity...',
                'Computing credibility score...',
                'Finalizing comprehensive report...'
            ];
            
            let stepIndex = 0;
            const stepInterval = setInterval(() => {
                if (stepIndex < steps.length) {
                    document.getElementById('loadingSteps').textContent = steps[stepIndex];
                    stepIndex++;
                } else {
                    clearInterval(stepInterval);
                }
            }, 500);
        }
        
        function simulateAdvancedAnalysis(content) {
            setTimeout(() => {
                // Hide loading
                document.getElementById('loading').style.display = 'none';
                // Generate enhanced analysis results
                const results = generateEnhancedResults(content);
                displayEnhancedResults(results);
                // Show results and analysis grid only after analysis is complete
                const resultsElement = document.getElementById('results');
                resultsElement.style.display = 'block';
                document.getElementById('analysisGrid').style.display = 'grid';
                resultsElement.scrollIntoView({ behavior: 'smooth' });
            }, 4000); // Longer loading for premium feel
        }
        
        function generateEnhancedResults(content) {
            const wordCount = content.split(' ').length;
            const hasNumbers = /\d/.test(content);
            const hasCapitals = /[A-Z]{2,}/.test(content);
            const hasExclamation = /!/.test(content);
            const hasQuestions = /\?/.test(content);
            const hasEmotional = /(amazing|terrible|shocking|unbelievable|breaking)/i.test(content);
            
            let score = 75;
            
            // Enhanced scoring algorithm
            if (wordCount > 100) score += 8;
            if (wordCount > 300) score += 5;
            if (hasNumbers) score += 7;
            if (!hasCapitals) score += 12;
            if (!hasExclamation) score += 10;
            if (!hasQuestions) score += 5;
            if (!hasEmotional) score += 8;
            
            // Add intelligent randomness
            score += Math.floor(Math.random() * 15) - 7;
            score = Math.max(25, Math.min(96, score));
            
            return {
                score: score,
                language: detectAdvancedLanguage(content),
                sentiment: generateAdvancedSentiment(content),
                authority: score > 75 ? 'High' : score > 55 ? 'Medium' : 'Low',
                recency: generateRecency(),
                links: Math.floor(Math.random() * 8) + 3 + ' Valid',
                bias: score > 70 ? 'Low' : score > 50 ? 'Medium' : 'High',
                social: generateSocialSignals(score),
                bot: score > 60 ? 'None' : 'Detected'
            };
        }
        
        function detectAdvancedLanguage(content) {
            if (/[\u0900-\u097F]/.test(content)) return 'Hindi';
            if (/[\u0600-\u06FF]/.test(content)) return 'Urdu';
            if (/[\u0980-\u09FF]/.test(content)) return 'Bengali';
            if (/[\u0A80-\u0AFF]/.test(content)) return 'Gujarati';
            if (/[\u0B80-\u0BFF]/.test(content)) return 'Tamil';
            if (/[\u0C00-\u0C7F]/.test(content)) return 'Telugu';
            return 'English';
        }
        
        function generateAdvancedSentiment(content) {
            const positive = /(good|great|excellent|amazing|wonderful|fantastic)/i.test(content);
            const negative = /(bad|terrible|awful|horrible|disaster|crisis)/i.test(content);
            
            if (positive && negative) return 'Mixed';
            if (positive) return 'Positive';
            if (negative) return 'Negative';
            return 'Neutral';
        }
        
        function generateRecency() {
            const options = ['Breaking', 'Recent', 'Today', 'This Week', 'Outdated'];
            return options[Math.floor(Math.random() * options.length)];
        }
        
        function generateSocialSignals(score) {
            if (score > 70) return 'Positive';
            if (score > 50) return 'Mixed';
            return 'Negative';
        }
        
        function displayEnhancedResults(results) {
            document.getElementById('scoreText').textContent = results.score + '%';
            document.getElementById('language').textContent = results.language;
            document.getElementById('sentiment').textContent = results.sentiment;
            document.getElementById('authority').textContent = results.authority;
            document.getElementById('recency').textContent = results.recency;
            document.getElementById('links').textContent = results.links;
            document.getElementById('bias').textContent = results.bias;
            document.getElementById('social').textContent = results.social;
            document.getElementById('bot').textContent = results.bot;
            
            // Update score circle with enhanced styling
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.className = 'score-circle ';
            
            if (results.score >= 70) {
                scoreCircle.className += 'score-high';
            } else if (results.score >= 50) {
                scoreCircle.className += 'score-medium';
            } else {
                scoreCircle.className += 'score-low';
            }
            
            // Add score animation
            animateScore(results.score);
        }
        
        function animateScore(finalScore) {
            const scoreElement = document.getElementById('scoreText');
            let currentScore = 0;
            const increment = finalScore / 30; // 30 steps
            
            const animation = setInterval(() => {
                currentScore += increment;
                if (currentScore >= finalScore) {
                    scoreElement.textContent = finalScore + '%';
                    clearInterval(animation);
                } else {
                    scoreElement.textContent = Math.floor(currentScore) + '%';
                }
            }, 50);
        }
        
        // Auto-resize textarea
        document.getElementById('newsText').addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 300) + 'px';
        });
        
        // Enhanced keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                analyzeContent();
            }
            if (e.key === 'Escape') {
                // Clear all inputs
                document.getElementById('newsText').value = '';
                document.getElementById('newsUrl').value = '';
                document.getElementById('newsImage').value = '';
                document.getElementById('results').style.display = 'none';
            }
        });
        
        // Initialize with smooth entrance animation
        window.addEventListener('load', function() {
            document.body.style.opacity = '0';
            document.body.style.transition = 'opacity 1s ease-in-out';
            setTimeout(() => {
                document.body.style.opacity = '1';
            }, 100);
        });
        
        // Add intersection observer for scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };
        
        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.transform = 'translateY(0)';
                    entry.target.style.opacity = '1';
                }
            });
        }, observerOptions);
        
        // Observe feature cards for scroll animation
        document.querySelectorAll('.feature-card').forEach(card => {
            card.style.transform = 'translateY(50px)';
            card.style.opacity = '0';
            card.style.transition = 'all 0.6s ease-out';
            observer.observe(card);
        });
    </script>
    
    <script>
const translations = {
  en: {
    tagline: "Advanced Multi-Language Fake News Detection with Social Context Analysis",
    urlLabel: "📰 News Article URL (Optional)",
    urlPlaceholder: "Paste news article URL (optional)",
    textLabel: "📝 News Content",
    textPlaceholder: "Paste the news article text here...",
    analyzeBtn: "Analyze for Truth",
    loadingText: "Initializing neural networks...",
    credibilityScore: "Credibility Score",
    basedOn: "Based on 12 advanced parameters",
    langDetected: "🌐 Language Detected",
    sentimentScore: "📊 Sentiment Score",
    sourceAuthority: "🏢 Source Authority",
    recencyCheck: "⏱️ Recency Check",
    externalLinks: "🔗 External Links",
    biasDetection: "🎯 Bias Detection"
  },
  hi: {
    tagline: "एडवांस्ड मल्टी-लैंग्वेज फेक न्यूज़ डिटेक्शन और सोशल कॉन्टेक्स्ट एनालिसिस",
    urlLabel: "📰 न्यूज़ आर्टिकल URL (वैकल्पिक)",
    urlPlaceholder: "न्यूज़ आर्टिकल URL यहाँ डालें (वैकल्पिक)",
    textLabel: "📝 न्यूज़ कंटेंट",
    textPlaceholder: "यहाँ न्यूज़ आर्टिकल का टेक्स्ट पेस्ट करें...",
    analyzeBtn: "सत्यापन करें",
    loadingText: "न्यूरल नेटवर्क प्रारंभ हो रहे हैं...",
    credibilityScore: "विश्वसनीयता स्कोर",
    basedOn: "12 एडवांस्ड पैरामीटर्स पर आधारित",
    langDetected: "🌐 डिटेक्टेड भाषा",
    sentimentScore: "📊 सेंटिमेंट स्कोर",
    sourceAuthority: "🏢 स्रोत अथॉरिटी",
    recencyCheck: "⏱️ हाल की जाँच",
    externalLinks: "🔗 बाहरी लिंक",
    biasDetection: "🎯 बायस डिटेक्शन"
  },
  ur: {
    tagline: "ایڈوانسڈ ملٹی لینگویج فیک نیوز ڈیٹیکشن اور سوشل کانٹیکسٹ اینالیسس",
    urlLabel: "📰 نیوز آرٹیکل یو آر ایل (اختیاری)",
    urlPlaceholder: "نیوز آرٹیکل یو آر ایل یہاں ڈالیں (اختیاری)",
    textLabel: "📝 نیوز مواد",
    textPlaceholder: "یہاں نیوز آرٹیکل کا متن پیسٹ کریں...",
    analyzeBtn: "تصدیق کریں",
    loadingText: "نیورل نیٹ ورک شروع ہو رہے ہیں...",
    credibilityScore: "معتبر اسکور",
    basedOn: "12 جدید پیرا میٹرز پر مبنی",
    langDetected: "🌐 زبان کی شناخت",
    sentimentScore: "📊 جذباتی اسکور",
    sourceAuthority: "🏢 ماخذ اتھارٹی",
    recencyCheck: "⏱️ حالیہ جانچ",
    externalLinks: "🔗 بیرونی لنکس",
    biasDetection: "🎯 تعصب کی شناخت"
  },
  bn: {
    tagline: "উন্নত মাল্টি-ল্যাঙ্গুয়েজ ফেক নিউজ ডিটেকশন ও সোশ্যাল কনটেক্সট বিশ্লেষণ",
    urlLabel: "📰 সংবাদ নিবন্ধ URL (ঐচ্ছিক)",
    urlPlaceholder: "সংবাদ নিবন্ধ URL এখানে দিন (ঐচ্ছিক)",
    textLabel: "📝 সংবাদ বিষয়বস্তু",
    textPlaceholder: "এখানে সংবাদ নিবন্ধের টেক্সট পেস্ট করুন...",
    analyzeBtn: "যাচাই করুন",
    loadingText: "নিউরাল নেটওয়ার্ক চালু হচ্ছে...",
    credibilityScore: "বিশ্বাসযোগ্যতা স্কোর",
    basedOn: "১২টি উন্নত প্যারামিটারে ভিত্তি করে",
    langDetected: "🌐 ভাষা সনাক্তকরণ",
    sentimentScore: "📊 অনুভূতি স্কোর",
    sourceAuthority: "🏢 উৎস কর্তৃত্ব",
    recencyCheck: "⏱️ সাম্প্রতিকতা পরীক্ষা",
    externalLinks: "🔗 বাহ্যিক লিঙ্ক",
    biasDetection: "🎯 পক্ষপাত সনাক্তকরণ"
  },
  gu: {
    tagline: "એડવાન્સ્ડ મલ્ટી-લૅન્ગ્વેજ ફેક ન્યૂઝ ડિટેક્શન અને સોશિયલ કોન્ટેક્સ્ટ એનાલિસિસ",
    urlLabel: "📰 ન્યૂઝ આર્ટિકલ URL (વૈકલ્પિક)",
    urlPlaceholder: "ન્યૂઝ આર્ટિકલ URL અહીં મૂકો (વૈકલ્પિક)",
    textLabel: "📝 ન્યૂઝ સામગ્રી",
    textPlaceholder: "અહીં ન્યૂઝ આર્ટિકલનો ટેક્સ્ટ પેસ્ટ કરો...",
    analyzeBtn: "ચકાસો",
    loadingText: "ન્યુરલ નેટવર્ક શરૂ થઈ રહ્યું છે...",
    credibilityScore: "વિશ્વસનીયતા સ્કોર",
    basedOn: "12 એડવાન્સ્ડ પેરામીટર્સ પર આધારિત",
    langDetected: "🌐 શોધાયેલ ભાષા",
    sentimentScore: "📊 ભાવનાત્મક સ્કોર",
    sourceAuthority: "🏢 સ્ત્રોત ઓથોરિટી",
    recencyCheck: "⏱️ તાજેતરની તપાસ",
    externalLinks: "🔗 બાહ્ય લિંક્સ",
    biasDetection: "🎯 પક્ષપાત શોધો"
  }
};

function setLanguage(lang) {
  document.querySelectorAll('[data-key]').forEach(el => {
    const key = el.getAttribute('data-key');
    if (translations[lang] && translations[lang][key]) el.textContent = translations[lang][key];
  });
  document.querySelectorAll('[data-key-placeholder]').forEach(el => {
    const key = el.getAttribute('data-key-placeholder');
    if (translations[lang] && translations[lang][key]) el.placeholder = translations[lang][key];
  });
}
document.getElementById('langSwitcher').addEventListener('change', function() {
  setLanguage(this.value);
});
setLanguage('en');
</script>
</body>
</html>